<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Management | GlamorByBee</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../admin/css/admin.css">
    <link rel="stylesheet" href="css/client.css">
</head>
<body>
    <!-- Header -->
    <header class="admin-header">
        <div class="header-content">
            <div class="brand">
                <i class="bi bi-people-fill"></i>
                <span>Client Management</span>
            </div>
            <div class="header-actions">
                <a href="#" data-admin-link class="btn btn-sm btn-outline-secondary">
                    <i class="bi bi-speedometer2"></i> Back to Admin
                </a>
                <a href="../index.html" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-house"></i> Back to Site
                </a>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container-fluid">
            <!-- Page Header -->
            <div class="page-header">
                <div>
                    <h1>Clients</h1>
                    <p class="text-muted">Manage your client database</p>
                </div>
                <button class="btn btn-primary" id="addClientBtn">
                    <i class="bi bi-plus-circle"></i> Add New Client
                </button>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <i class="bi bi-people"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="totalClients">0</h3>
                        <p>Total Clients</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="totalVisits">0</h3>
                        <p>Total Visits</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <i class="bi bi-person-plus"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="newThisMonth">0</h3>
                        <p>New This Month</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="avgLoyalty">0</h3>
                        <p>Avg Loyalty Points</p>
                    </div>
                </div>
            </div>

            <!-- Filters and Search -->
            <div class="controls-section">
                <div class="search-box">
                    <i class="bi bi-search"></i>
                    <input type="text" id="clientSearch" placeholder="Search by name, email, or phone...">
                </div>
                <select id="contactFilter" class="filter-select">
                    <option value="all">All Contact Preferences</option>
                    <option value="email">Email</option>
                    <option value="phone">Phone</option>
                    <option value="sms">SMS</option>
                </select>
                <button class="btn btn-outline-secondary" id="exportBtn">
                    <i class="bi bi-download"></i> Export CSV
                </button>
            </div>

            <!-- Clients Table -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th class="sortable active" data-sort="name">
                                Client
                                <i class="bi bi-chevron-down sort-icon"></i>
                            </th>
                            <th class="sortable" data-sort="email">
                                Contact
                                <i class="bi bi-chevron-expand sort-icon"></i>
                            </th>
                            <th class="sortable" data-sort="registered">
                                Registered
                                <i class="bi bi-chevron-expand sort-icon"></i>
                            </th>
                            <th class="sortable" data-sort="visits">
                                Visits
                                <i class="bi bi-chevron-expand sort-icon"></i>
                            </th>
                            <th class="sortable" data-sort="loyalty">
                                Loyalty Points
                                <i class="bi bi-chevron-expand sort-icon"></i>
                            </th>
                            <th>Preferred Contact</th>
                            <th>Actions</th>
                        </tr>
                        <tr class="filter-row">
                            <td><input type="text" class="form-control form-control-sm" placeholder="Filter name..." data-filter="name"></td>
                            <td><input type="text" class="form-control form-control-sm" placeholder="Filter contact..." data-filter="email"></td>
                            <td><input type="date" class="form-control form-control-sm" data-filter="registered"></td>
                            <td><input type="number" class="form-control form-control-sm" placeholder="Min visits..." data-filter="visits"></td>
                            <td><input type="number" class="form-control form-control-sm" placeholder="Min points..." data-filter="loyalty"></td>
                            <td><select class="form-select form-select-sm" data-filter="contact"><option value="">All</option><option value="email">Email</option><option value="phone">Phone</option><option value="sms">SMS</option></select></td>
                            <td></td>
                        </tr>
                    </thead>
                    <tbody id="clientsTableBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Add/Edit Client Modal -->
    <div class="modal fade" id="clientModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="clientModalTitle">Add New Client</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="clientForm">
                        <input type="hidden" id="clientId">
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="firstName" class="form-label">First Name *</label>
                                <input type="text" class="form-control" id="firstName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="lastName" class="form-label">Last Name *</label>
                                <input type="text" class="form-control" id="lastName" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email *</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label">Phone *</label>
                                <input type="tel" class="form-control" id="phone" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="preferredContact" class="form-label">Preferred Contact</label>
                                <select class="form-select" id="preferredContact">
                                    <option value="email">Email</option>
                                    <option value="phone">Phone</option>
                                    <option value="sms">SMS</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="loyaltyPoints" class="form-label">Loyalty Points</label>
                                <input type="number" class="form-control" id="loyaltyPoints" value="0" min="0">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="notes" rows="3" placeholder="Special requests, preferences, allergies..."></textarea>
                        </div>

                        <hr class="my-4">
                        <h6 class="mb-3">Address Information (Optional)</h6>

                        <div class="mb-3">
                            <label for="streetAddress" class="form-label">Street Address</label>
                            <input type="text" class="form-control" id="streetAddress">
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="city" class="form-label">City</label>
                                <input type="text" class="form-control" id="city">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="state" class="form-label">State</label>
                                <input type="text" class="form-control" id="state" maxlength="2" placeholder="CA">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="zipCode" class="form-label">Zip Code</label>
                                <input type="text" class="form-control" id="zipCode" maxlength="10">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveClientBtn">
                        <i class="bi bi-check-circle"></i> Save Client
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Client Details Modal -->
    <div class="modal fade" id="viewClientModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Client Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="viewClientBody">
                    <!-- Populated by JavaScript -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editFromViewBtn">
                        <i class="bi bi-pencil"></i> Edit Client
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Client JS -->
    <script src="js/client.js"></script>
</body>
</html>
